
<!DOCTYPE html>  <html lang="ar">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Ø¥Ù‚Ø±Ø§Ø± ÙˆØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</title>  
    <link rel="stylesheet" href="styles.css">  
    <style>  
        #firebase-status {  
            position: fixed;  
            top: -50px;  
            left: 50%;  
            transform: translateX(-50%);  
            background-color: white;  
            padding: 8px 16px;  
            border-radius: 5px;  
            font-size: 14px;  
            font-weight: bold;  
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);  
            transition: top 0.5s ease-in-out, opacity 0.5s ease-in-out;  
            opacity: 0;  
            z-index: 1000;  
        }  
        .loading {  
            background-color: #ccc !important;  
            cursor: not-allowed;  
            position: relative;  
        }  
        .loading-spinner {  
            position: fixed;  
            top: 50%;  
            left: 50%;  
            transform: translate(-50%, -50%);  
            width: 50px;  
            height: 50px;  
            border: 5px solid #ccc;  
            border-top-color: #007bff;  
            border-radius: 50%;  
            animation: spin 1s linear infinite;  
            display: none;  
            z-index: 2000;  
        }  
        @keyframes spin {  
            0% { transform: translate(-50%, -50%) rotate(0deg); }  
            100% { transform: translate(-50%, -50%) rotate(360deg); }  
        }  
        .small-btn {  
            padding: 6px 12px;  
            font-size: 14px;  
            margin-top: 5px;  
        }  
        .container {  
            max-width: 400px;  
            margin: auto;  
            text-align: center;  
        }  
    </style>  
</head>  
<body>  <div id="firebase-status"></div>  
<div class="loading-spinner" id="loadingSpinner"></div>  <script type="module">  
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";  
  import { getAuth, createUserWithEmailAndPassword, sendEmailVerification, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";  
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";  
  
  const firebaseConfig = {  
    apiKey: "AIzaSyCcxorEgUgnocy0vlJolVEtUkz-oyyWbLg",  
    authDomain: "forms-v.firebaseapp.com",  
    projectId: "forms-v",  
    storageBucket: "forms-v.firebasestorage.app",  
    messagingSenderId: "55307283635",  
    appId: "1:55307283635:web:f88d8f3387c928830ad4c6"  
  };  
  
  function showMessage(message, color) {  
    const statusDiv = document.getElementById("firebase-status");  
    statusDiv.textContent = message;  
    statusDiv.style.color = color;  
    statusDiv.style.top = "10px";   
    statusDiv.style.opacity = "1";  
    setTimeout(() => {  
      statusDiv.style.top = "-50px";   
      statusDiv.style.opacity = "0";  
    }, 1600);  
  }  
  
  function showLoading(show) {  
    document.getElementById("loadingSpinner").style.display = show ? "block" : "none";  
  }  
  
  let auth, db;  
  try {  
    const app = initializeApp(firebaseConfig);  
    auth = getAuth(app);  
    db = getFirestore(app);  
    console.log("âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase!");  
    showMessage("âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase", "green");  
  } catch (error) {  
    console.error("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase:", error);  
    showMessage("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase", "red");  
  }  
  
  document.addEventListener("DOMContentLoaded", () => {  
    const signupForm = document.getElementById("signupForm");  
    const sendVerifyBtn = document.getElementById("sendVerifyEmail");  
    const checkVerifyBtn = document.getElementById("verifyEmailBtn");  
    const submitDataBtn = document.getElementById("submitDataBtn");  
  
    sendVerifyBtn.addEventListener("click", async () => {  
      sendVerifyBtn.classList.add("loading");  
      showLoading(true);  
      const email = document.getElementById("email").value;  
      const password = "DefaultPassword123";    
  
      try {  
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);  
        const user = userCredential.user;  
        await sendEmailVerification(user);  
        alert("ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.");  
      } catch (error) {  
        alert("âŒ Ø®Ø·Ø£: " + error.message);  
      } finally {  
        sendVerifyBtn.classList.remove("loading");  
        showLoading(false);  
      }  
    });  
  
    checkVerifyBtn.addEventListener("click", async () => {  
      checkVerifyBtn.classList.add("loading");  
      showLoading(true);  
      const user = auth.currentUser;  
      if (user) {  
        await user.reload();  
        if (user.emailVerified) {  
          alert("âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");  
          submitDataBtn.disabled = false;  
        } else {  
          alert("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø¹Ø¯.");  
        }  
      } else {  
        alert("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø­Ø§Ù„ÙŠÙ‹Ø§.");  
      }  
      checkVerifyBtn.classList.remove("loading");  
      showLoading(false);  
    });  
  
    submitDataBtn.addEventListener("click", async () => {  
      submitDataBtn.classList.add("loading");  
      showLoading(true);  
  
      try {  
        await addDoc(collection(db, "submissions"), {  
          name: document.getElementById("fullName").value,  
          email: document.getElementById("email").value,  
          phone: document.getElementById("phone").value,  
          gender: document.getElementById("gender").value,  
          nationality: document.getElementById("nationality").value  
        });  
  
        window.location.href = "success.html";   
      } catch (error) {  
        alert("âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: " + error.message);  
      } finally {  
        submitDataBtn.classList.remove("loading");  
        showLoading(false);  
      }  
    });  
  });  
</script>  <div class="container">  
    <h2>Ø¥Ù‚Ø±Ø§Ø± ÙˆØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</h2>  <form id="signupForm">  
    <input type="text" id="fullName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„" required>  
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>  
    <button type="button" id="sendVerifyEmail" class="small-btn">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚</button>  
      
    <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>  

    <button type="button" id="verifyEmailBtn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­Ù‚Ù‚</button>  

    <select id="gender">  
        <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù†Ø³</option>  
        <option value="male">Ø°ÙƒØ±</option>  
        <option value="female">Ø£Ù†Ø«Ù‰</option>  
    </select>  

    <input type="text" id="nationality" placeholder="Ø§Ù„Ø¬Ù†Ø³ÙŠØ©" required>  

    <div class="terms">  
        <label>  
            Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="terms.html" target="_blank">Ø§Ù„Ø¥Ù‚Ø±Ø§Ø± ÙˆØ³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>  
            <input type="checkbox" id="terms" required>  
        </label>  
    </div>  

    <p class="whatsapp-link">ğŸ“Œ Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ <a href="https://whatsapp.com/channel/0029Vb8xtjLIHphPBtwBWu3J" target="_blank">Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</a></p>  

    <button type="button" id="submitDataBtn" disabled>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>  
</form>

</div>  </body>  
</html>
